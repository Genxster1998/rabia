{% extends "base.html" %}
{% load staticfiles %}

{% block header_title%}
{% endblock %}

{% block header%}
{{post.title}}
{% endblock %}

{% block about %}
{% endblock %}

{% block body %}
  <div class="container">
    <div class="row blog-body">
      <div class="blogpost twelve columns">
        <span class="post-date">{{ post.published_date }}</span>
        {{ post.text|linebreaks }}
        <span class="line">
          <span class="box"><i></i></span>
        </span>
      </div>
      <div class="comments">
        <h4 class="title">Comments</h4>
        <div class="comment">
          <form action="{% url 'post_detail' pk=post.pk %}" method="POST">{% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="save btn btn-default">Send</button>
          </form>
        </div>
        {% for comment in post.comments.all %}
          {% if user.is_authenticated or comment.approved_comment %}
            <div class="comment">
              <h5>{{ comment.author }}</h5>
              <span class="meta-date">{{ comment.created_date }}</span>
              <p>{{ comment.text|linebreaks }}</p>
              {% if not comment.approved_comment %}
                <a class="btn btn-default" href='{% url "comment_remove" pk=comment.pk %}'><span class="">Delete</span></a>
                <a class="btn btn-default" href='{% url "comment_approve" pk=comment.pk %}'><span class="">Approve</span></a>
              {% endif %}
            </div>
          {% endif %}
        {% empty %}
        <div class="comment">
          <p>No comments here :(</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}
